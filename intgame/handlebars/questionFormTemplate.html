<script src="https://code.jquery.com/jquery-1.10.2.js"></script>

<form method="post" name="findQuestions">
    <fieldset>
        <legend>Find questions</legend>
        <div>
            <input type="text" name="link" placeholder="enter you link"/>
            <input type="submit" name="submit" value="find"/>
        </div>
    </fieldset>
</form>

<div id="result"></div>

<script>
    document.forms.findQuestions.onsubmit = function() {
        var data = new Object();
        data.link = document.forms.findQuestions.link.value;
        console.log('start');
        upload(JSON.stringify(data));
        console.log('end');
        return false;
    }

    function upload(json) {
        console.log(json);
        var hxr = new XMLHttpRequest();
        hxr.open('POST', '/questions', true);
        hxr.setRequestHeader('Content-type', 'application/json');

        hxr.onreadystatechange = function() {
            if (hxr.readyState != 4) return;
            if (hxr.status == 200) {
                var response = JSON.parse(hxr.response);
                console.log(Array.isArray(response));
                var div = document.getElementById('result').
                response.forEach(function(value) {
                    div.innerHTML += value + "<br>";
                });
            } else {
                alert('Error!!!');
            }
        };

        hxr.send(json);
    }
</script>

